# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫ SSH

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ VPS –ø–æ SSH –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## üî¥ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: "Remote side unexpectedly closed network connection"

–ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å —ç—Ç–æ–π –æ—à–∏–±–∫–æ–π –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—Ç–∞ SSH –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞.

## üìã –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –í–æ–∑–º–æ–∂–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ SSH –Ω–∞ 1337 –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** ‚Äî –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ
2. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª iptables** ‚Äî —Å–∫—Ä–∏–ø—Ç –º–æ–≥ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ SSH
3. **–û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ sshd** ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ `/etc/ssh/sshd_config`
4. **–°–ª—É–∂–±–∞ sshd –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞** ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã –º–æ–≥ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –æ—à–∏–±–∫–æ–π
5. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP-–∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî iptables –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
6. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ PasswordAuthentication** ‚Äî –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–∞—Ä–æ–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
7. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ IPv6** ‚Äî –µ—Å–ª–∏ –±—ã–ª –æ—Ç–∫–ª—é—á–µ–Ω IPv6, —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ SSH

### –ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:

**1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ SSH –Ω–∞ 1337 –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**
- **–ü–æ—á–µ–º—É —ç—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ:** –°–∫—Ä–∏–ø—Ç –≤–µ—Ä—Å–∏–∏ 1.3.0 –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ—Ä—Ç SSH –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `SSH_PORT` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1337), –Ω–æ –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã—Ç—å —ç—Ç–æ—Ç –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø–æ—Ä—Ç—É 22, –∞ SSH —Ç–µ–ø–µ—Ä—å —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 1337.
- **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø–æ—Ä—Ç—É 1337: `ssh root@–≤–∞—à-ip -p 1337`

**2. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª iptables**
- **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ:** –°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç iptables –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ICMP –∏ –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π, —á—Ç–æ –º–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
- **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ß–µ—Ä–µ–∑ VNC/Console –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ iptables: `iptables -L -n -v`

## üîß –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ VNC/Console –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

- **DigitalOcean:** Droplets ‚Üí Console
- **AWS:** EC2 Instances ‚Üí Connect ‚Üí EC2 Serial Console
- **Hetzner:** Servers ‚Üí Console
- **Vultr:** Instances ‚Üí Console
- **Linode:** Linodes ‚Üí Console

## üìä –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–ª—É–∂–±—ã SSH

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã SSH
systemctl status ssh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ SSH
systemctl is-active ssh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞ SSH
journalctl -u ssh -n 50 --no-pager
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ SSH

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SSH –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
sshd -t

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SSH –≤ —Ä–µ–∂–∏–º–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
sshd -T

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SSH
cat /etc/ssh/sshd_config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç—É —Å–ª—É—à–∞–µ—Ç—Å—è SSH
grep "^Port" /etc/ssh/sshd_config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–∑—Ä–µ—à–µ–Ω –ª–∏ –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é
grep "^PasswordAuthentication" /etc/ssh/sshd_config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–∑—Ä–µ—à–µ–Ω –ª–∏ –≤—Ö–æ–¥ –¥–ª—è root
grep "^PermitRootLogin" /etc/ssh/sshd_config
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤ SSH
tail -n 100 /var/log/auth.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö SSH
grep "error" /var/log/auth.log | tail -n 50

# –ü–æ–∏—Å–∫ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
grep "Failed" /var/log/auth.log | tail -n 50

# –ü–æ–∏—Å–∫ —É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
grep "Accepted" /var/log/auth.log | tail -n 50
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª iptables

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ iptables (IPv4)
iptables -L -n -v

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ iptables —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π —Å—Ç—Ä–æ–∫
iptables -L -n -v --line-numbers

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è SSH
iptables -L INPUT -n -v | grep -E "1337|22"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ iptables –¥–ª—è INPUT
iptables -L INPUT -n -v --line-numbers
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã—Ö –ø–æ—Ä—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç—É —Å–ª—É—à–∞–µ—Ç—Å—è SSH
ss -tuln | grep ssh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã
ss -tuln

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç 1337
ss -tuln | grep 1337

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç 22
ss -tuln | grep 22
```

## üõ†Ô∏è –†–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### –†–µ—à–µ–Ω–∏–µ 1: –ü–æ—Ä—Ç SSH –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ 1337

–ï—Å–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ SSH —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 1337:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 1337 –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø–æ—Ä—Ç—É 1337:**
   ```bash
   ssh root@–≤–∞—à-ip -p 1337
   ```

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–∞–≤–∏–ª–∞ iptables –±–ª–æ–∫–∏—Ä—É—é—Ç SSH

–ï—Å–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ iptables –±–ª–æ–∫–∏—Ä—É–µ—Ç SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Ü–µ–ø–æ—á–∫–µ INPUT
iptables -F INPUT

# –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–≤—Ä–µ–º–µ–Ω–Ω–æ)
iptables -P INPUT ACCEPT

# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
iptables -A INPUT -p tcp --dport 1337 -j ACCEPT
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞
iptables-save > /etc/iptables/rules.v4

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É SSH
systemctl restart ssh
```

### –†–µ—à–µ–Ω–∏–µ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SSH —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `sshd -t` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏:

```bash
# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.backup

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano /etc/ssh/sshd_config

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–Ω–æ–≤–∞
sshd -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É SSH
systemctl restart ssh
```

### –†–µ—à–µ–Ω–∏–µ 4: –°–ª—É–∂–±–∞ SSH –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞

–ï—Å–ª–∏ `systemctl is-active ssh` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `inactive` –∏–ª–∏ `failed`:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∂—É—Ä–Ω–∞–ª —Å–ª—É–∂–±—ã SSH
journalctl -u ssh -n 100 --no-pager

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É SSH
systemctl start ssh

# –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã SSH
systemctl enable ssh
```

### –†–µ—à–µ–Ω–∏–µ 5: –í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –ø–æ—Ä—Ç—É 22

–ï—Å–ª–∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –±—ã—Å—Ç—Ä–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ø–æ—Ä—Ç–æ–º 1337:

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç SSH –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ 22
nano /etc/ssh/sshd_config
# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É Port –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –µ—ë –Ω–∞:
Port 22

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sshd -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É SSH
systemctl restart ssh

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 22 –æ—Ç–∫—Ä—ã—Ç –≤ iptables
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
iptables-save > /etc/iptables/rules.v4
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤ –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é:

```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ SSH
ssh root@–≤–∞—à-ip -p 1337
# –∏–ª–∏
ssh root@–≤–∞—à-ip -p 22

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
tail -f /var/log/auth.log

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª—É–∂–±–∞ SSH –∑–∞–ø—É—â–µ–Ω–∞
systemctl status ssh
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–µ VPS

**–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ VPS –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤!** –ü—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞:

- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏
- –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å–æ–ª–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ —É–≤–µ–Ω—á–∞–ª–∏—Å—å —É—Å–ø–µ—Ö–æ–º

## üõ°Ô∏è –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –±—É–¥—É—â–µ–º

1. **–í—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç SSH –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ü–ï–†–ï–î –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `DRY_RUN=true` –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
3. **–î–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏**
4. **–ò–º–µ–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å–æ–ª–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º**
5. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö**

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `/var/log/auth.log` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à IP-–∞–¥—Ä–µ—Å –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
3. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∞—à–µ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

---

**–ê–≤—Ç–æ—Ä:** Kilo Code  
**–í–µ—Ä—Å–∏—è:** 1.3.0  
**–î–∞—Ç–∞:** 2025-01-11
