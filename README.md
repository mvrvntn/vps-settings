# Lightweight VPS Setup for Remnawave

**–í–µ—Ä—Å–∏—è:** 1.13.0
**–ê–≤—Ç–æ—Ä:** mvrvntn
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

`Lightweight VPS Setup for Remnawave` ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–≤–µ–∂–µ—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ VPS –Ω–∞ –±–∞–∑–µ Debian/Ubuntu. –°–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∫ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–æ–¥—ã `remnawave` –∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

- ‚úÖ **–û–±–ª–µ–≥—á–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** ‚Äî –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç UFW –∏–ª–∏ Fail2Ban, —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚Äî –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å `remnawave-reverse-proxy` –∏ `bbr3`
- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º** ‚Äî –ø–æ–Ω—è—Ç–Ω–æ–µ –º–µ–Ω—é —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è 100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç nf_conntrack (7200 —Å–µ–∫)
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π DoT/DoH

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/mvrvntn/vps-settings/main/setup.sh)
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```bash
bash setup.sh
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –º–µ–Ω—é —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```
üéì –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

  [1] üéì –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π SSH - –ò–∑–º–µ–Ω—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç SSH –∏ —É–∂–µ—Å—Ç–æ—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤.
  [2] üéì –£–∫—Ä–µ–ø–∏—Ç—å —Å–∏—Å—Ç–µ–º—É - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —è–¥—Ä–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
  [3] üéì –°–æ–∑–¥–∞—Ç—å swap-—Ñ–∞–π–ª - –°–æ–∑–¥–∞–µ—Ç swap-—Ñ–∞–π–ª 2GB –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
  ...
```

### –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
SSH_PORT=1337 INSTALL_TBLOCKER=true BLOCK_ICMP=true DISABLE_IPV6=true bash setup.sh
```

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `SSH_PORT` | ~~–ü–æ—Ä—Ç SSH~~ (–æ—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) | `2222` |
| `INSTALL_TBLOCKER` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å tblocker –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ | `false` |
| `BLOCK_ICMP` | –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å ICMP (ping) | `false` |
| `DISABLE_IPV6` | –û—Ç–∫–ª—é—á–∏—Ç—å IPv6 | `false` |
| `CONFIGURE_DNS` | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS-—Å–µ—Ä–≤–µ—Ä—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π DoT/DoH | `false` |
| `TIMEZONE` | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å | `Etc/UTC` |
| `WARN_TBLOCKER_CONFLICT` | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ tblocker | `true` |
| `WARN_ICMP_CONFLICT` | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ ICMP | `true` |
| `WARN_IPV6_CONFLICT` | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ IPv6 | `true` |
| `CONNTRACK_TIMEOUT` | –¢–∞–π–º–∞—É—Ç established —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (—Å–µ–∫—É–Ω–¥—ã) | `7200` |
| `ENABLE_KERNEL_HARDENING` | –í–∫–ª—é—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —è–¥—Ä–∞ | `true` |
| `ENABLE_NETWORK_LIMITS` | –í–∫–ª—é—á–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ª–∏–º–∏—Ç—ã | `true` |
| `ENABLE_LOGROTATE` | –í–∫–ª—é—á–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ | `true` |
| `ENABLE_CLEANUP` | –í–∫–ª—é—á–∏—Ç—å –æ—á–∏—Å—Ç–∫—É —Å–∏—Å—Ç–µ–º—ã | `true` |
| `LOG_RETENTION_DAYS` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ | `30` |
| `DRY_RUN` | –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π | `false` |

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### ~~–°–º–µ–Ω–∞ –ø–æ—Ä—Ç–∞ SSH~~ (–æ—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

**–§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.**

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –≤—Ä—É—á–Ω—É—é, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. üîì **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –≤–∞—à–µ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**
   
   –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Ö–æ–¥—è—â–µ–≥–æ TCP-—Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –Ω—É–∂–Ω—ã–π –ø–æ—Ä—Ç –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ VPS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

2. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH-—Å–µ—Ä–≤–µ—Ä**
   
   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `/etc/ssh/sshd_config`:
   ```bash
   nano /etc/ssh/sshd_config
   ```

3. üö´ **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ SSH-—Å–µ—Ä–≤–µ—Ä**
   
   ```bash
   systemctl restart sshd
   ```

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –Ω–æ–≤–æ–º—É –ø–æ—Ä—Ç—É –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–∞–Ω—Å–∞!**

## üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ~~**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞, —É–∂–µ—Å—Ç–æ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏~~ (–æ—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- **–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —è–¥—Ä–∞, —Å–µ—Ç–µ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **Swap-—Ñ–∞–π–ª** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ 2GB swap –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Chrony** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
- **Unattended-upgrades** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Docker Compose** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- **–ë–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã** ‚Äî htop, mc, curl, wget, git, ncdu, iptables-persistent

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **tblocker** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ—Ä—Ä–µ–Ω—Ç-—Ç—Ä–∞—Ñ–∏–∫–∞
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ICMP** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ping-–∑–∞–ø—Ä–æ—Å–æ–≤
- **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6** ‚Äî –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ IPv6
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π DoT/DoH

### –ò–µ—Ä–∞—Ä—Ö–∏—è –≤—ã–±–æ—Ä–∞ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –≤—ã–±–æ—Ä–∞ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤:

1. **–û—Å–Ω–æ–≤–Ω–æ–π DNS over TLS (DoT)** ‚Äî `5u35p8m9i7.cloudflare-gateway.com`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω systemd-resolved –∏–ª–∏ stubby
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ DNS-—Ç—Ä–∞—Ñ–∏–∫–∞

2. **–û—Å–Ω–æ–≤–Ω–æ–π DNS over HTTPS (DoH)** ‚Äî `https://5u35p8m9i7.cloudflare-gateway.com/dns-query`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è DoT

3. **–û—Å–Ω–æ–≤–Ω–æ–π DNS IPv4 #1** ‚Äî `84.21.189.133`

4. **–û—Å–Ω–æ–≤–Ω–æ–π DNS IPv4 #2** ‚Äî `193.23.209.189`

5. **–†–µ–∑–µ—Ä–≤–Ω—ã–π DNS DoH** ‚Äî `https://dns.comss.one/dns-query`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

6. **–†–µ–∑–µ—Ä–≤–Ω—ã–π DNS IPv4 #1** ‚Äî `83.220.169.155`

7. **–†–µ–∑–µ—Ä–≤–Ω—ã–π DNS IPv4 #2** ‚Äî `212.109.195.93`
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

### –ú–µ—Ç–æ–¥—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS:

1. **systemd-resolved —Å DoT** ‚Äî –µ—Å–ª–∏ systemd-resolved –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç DNS over TLS –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

2. **stubby —Å DoT** ‚Äî –µ—Å–ª–∏ stubby —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç DNS over TLS —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π stub-—Ä–µ–∑–æ–ª–≤–µ—Ä

3. **–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** ‚Äî –µ—Å–ª–∏ DoT –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `/etc/resolv.conf` —Å IPv4-–∞–¥—Ä–µ—Å–∞–º–∏
   - –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ DHCP

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DNS-—Ñ—É–Ω–∫—Ü–∏–∏

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º: –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 11 –≤ –º–µ–Ω—é
bash setup.sh

# –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π DNS
CONFIGURE_DNS=true bash setup.sh

# –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π DNS –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ø–æ—Ä—Ç–æ–º SSH
SSH_PORT=1337 CONFIGURE_DNS=true bash setup.sh
```

## ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏:

- ‚úÖ **remnawave-reverse-proxy** ‚Äî https://github.com/eGamesAPI/remnawave-reverse-proxy
- ‚úÖ **bbr3** ‚Äî BBR3 TCP congestion control

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏:

| –§—É–Ω–∫—Ü–∏—è | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç | –†–µ—à–µ–Ω–∏–µ |
|---------|----------------------|---------|
| tblocker | remnawave-reverse-proxy, bbr3 (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç iptables) | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ tblocker –ü–û–°–õ–ï —ç—Ç–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ICMP | remnawave-reverse-proxy, bbr3 (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç ICMP) | –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç ICMP |
| –û—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6 | remnawave-reverse-proxy, bbr3 (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç IPv6) | –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç IPv6 |

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `WARN_*_CONFLICT=false`, —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.

## üîß –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–ª—É–∂–±

```bash
# Docker
systemctl status docker

# Chrony
systemctl status chrony
chronyc sources

# Unattended-upgrades
systemctl status unattended-upgrades

# Tblocker (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
systemctl status tblocker
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ iptables

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∞–≤–∏–ª
iptables -L -v -n

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
iptables-save > /etc/iptables/rules.v4

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
iptables-restore < /etc/iptables/rules.v4
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ swap

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä swap
free -h

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
swapon --show
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

```bash
# –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
date

# –°—Ç–∞—Ç—É—Å chrony
timedatectl status
chronyc tracking
```

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 1.13.0 (2024-01-12)

- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º, —á—Ç–æ SSH –æ—Ç–∫–ª—é—á–µ–Ω
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSH

### –í–µ—Ä—Å–∏—è 1.12.0 (2024-01-12)

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π DoT/DoH
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏—è –≤—ã–±–æ—Ä–∞ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤ —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `CONFIGURE_DNS` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º DNS-—Ñ—É–Ω–∫—Ü–∏–∏

### –í–µ—Ä—Å–∏—è 1.11.0 (2024-01-11)

- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç `nf_conntrack_tcp_timeout_established` —Å 3600 –¥–æ 7200 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∞–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤ COMPATIBILITY_ANALYSIS.md
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ —Ä–µ—à–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 1.10.0 (2024-01-10)

- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ (check_bbr3, check_bbr_control, check_remnawave)
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è SKIP_IF_BBR3, SKIP_IF_BBR_CONTROL, SKIP_IF_REMNWAVE
- ‚úÖ –°–¥–µ–ª–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–º–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω COMPATIBILITY_ANALYSIS.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –í–µ—Ä—Å–∏—è 1.0.0 (2024-01-01)

- ‚úÖ –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —Å —ç–º–æ–¥–∑–∏
- ‚úÖ –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
- ‚úÖ –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –æ—Ç–∫—Ä–æ–π—Ç–µ issue –Ω–∞ GitHub:

https://github.com/mvrvntn/vps-settings/issues

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [COMPATIBILITY_ANALYSIS.md](COMPATIBILITY_ANALYSIS.md) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- [plans/vps-setup-audit-plan.md](plans/vps-setup-audit-plan.md) ‚Äî –ø–ª–∞–Ω –∞—É–¥–∏—Ç–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Remnawave**
